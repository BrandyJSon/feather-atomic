From c765bc51864b90ebc46c11780ccc20ad16eddd6a Mon Sep 17 00:00:00 2001
From: tobtoht <tob@featherwallet.org>
Date: Tue, 8 Nov 2022 00:59:36 +0100
Subject: [PATCH] Fix QTBUG-92199

---
 src/widgets/styles/qstylesheetstyle.cpp          |  1 -
 .../qstylesheetstyle/tst_qstylesheetstyle.cpp    | 16 ----------------
 2 files changed, 17 deletions(-)

diff --git a/qtbase/src/widgets/styles/qstylesheetstyle.cpp b/qtbase/src/widgets/styles/qstylesheetstyle.cpp
index 6abef62835..7aca4d5788 100644
--- a/qtbase/src/widgets/styles/qstylesheetstyle.cpp
+++ b/qtbase/src/widgets/styles/qstylesheetstyle.cpp
@@ -1474,7 +1474,6 @@ void QRenderRule::configurePalette(QPalette *p, QPalette::ColorGroup cg, const Q
         p->setBrush(cg, w->foregroundRole(), pal->foreground);
         p->setBrush(cg, QPalette::WindowText, pal->foreground);
         p->setBrush(cg, QPalette::Text, pal->foreground);
-        p->setBrush(cg, QPalette::PlaceholderText, pal->foreground);
     }
     if (pal->selectionBackground.style() != Qt::NoBrush)
         p->setBrush(cg, QPalette::Highlight, pal->selectionBackground);
diff --git a/qtbase/tests/auto/widgets/styles/qstylesheetstyle/tst_qstylesheetstyle.cpp b/qtbase/tests/auto/widgets/styles/qstylesheetstyle/tst_qstylesheetstyle.cpp
index 82d48b1692..9add99325b 100644
--- a/qtbase/tests/auto/widgets/styles/qstylesheetstyle/tst_qstylesheetstyle.cpp
+++ b/qtbase/tests/auto/widgets/styles/qstylesheetstyle/tst_qstylesheetstyle.cpp
@@ -103,7 +103,6 @@ private slots:
     void QTBUG15910_crashNullWidget();
     void QTBUG36933_brokenPseudoClassLookup();
     void styleSheetChangeBeforePolish();
-    void placeholderColor();
     void enumPropertySelector_data();
     void enumPropertySelector();
     //at the end because it mess with the style.
@@ -2331,21 +2330,6 @@ void tst_QStyleSheetStyle::highdpiImages()
     QHighDpiScaling::updateHighDpiScaling(); // reset to normal
 }
 
-void tst_QStyleSheetStyle::placeholderColor()
-{
-    const QColor red(Qt::red);
-    qApp->setStyleSheet("* { color: red; }");
-    QLineEdit le1;
-    QLineEdit le2;
-    le2.setEnabled(false);
-    le1.ensurePolished();
-    QCOMPARE(le1.palette().placeholderText(), red);
-    le2.ensurePolished();
-    QCOMPARE(le2.palette().placeholderText(), red);
-    le2.setEnabled(true);
-    QCOMPARE(le2.palette().placeholderText(), red);
-}
-
 void tst_QStyleSheetStyle::enumPropertySelector_data()
 {
     QTest::addColumn<QString>("styleSheet");
-- 
2.38.1

